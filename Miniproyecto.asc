Version 4
SHEET 1 2496 712
WIRE 368 -512 368 -544
WIRE 992 -480 656 -480
WIRE 1280 -464 1056 -464
WIRE 1408 -464 1280 -464
WIRE 992 -448 800 -448
WIRE 368 -384 368 -432
WIRE 448 -384 368 -384
WIRE 1280 -368 1280 -464
WIRE 1328 -368 1280 -368
WIRE 368 -352 368 -384
WIRE 448 -352 448 -384
WIRE 1440 -256 1360 -256
WIRE 368 -224 368 -272
WIRE 1488 -208 1488 -240
WIRE 1552 -208 1488 -208
WIRE 1328 -192 1328 -368
WIRE 1360 -192 1360 -256
WIRE 1360 -192 1328 -192
WIRE 1488 -192 1488 -208
WIRE 1360 -112 1360 -192
WIRE 1440 -112 1360 -112
WIRE 1488 -48 1488 -96
WIRE 1424 16 1264 16
WIRE 1664 16 1424 16
WIRE 384 48 208 48
WIRE 1664 80 1664 16
WIRE 1424 96 1424 16
WIRE 80 112 -112 112
WIRE 288 128 272 128
WIRE 384 128 384 48
WIRE 384 128 352 128
WIRE 400 128 384 128
WIRE 496 128 464 128
WIRE -112 160 -112 112
WIRE 80 160 80 112
WIRE 208 160 208 48
WIRE 272 192 272 128
WIRE 272 192 256 192
WIRE 496 192 496 128
WIRE 544 192 496 192
WIRE 624 192 544 192
WIRE 816 192 624 192
WIRE 976 192 912 192
WIRE 1040 192 976 192
WIRE 1152 192 1104 192
WIRE 1264 192 1264 16
WIRE 1264 192 1152 192
WIRE 624 240 624 192
WIRE 976 240 976 192
WIRE 1664 240 1664 176
WIRE 1728 240 1664 240
WIRE 1824 240 1808 240
WIRE 1936 240 1824 240
WIRE 272 256 272 192
WIRE 288 256 272 256
WIRE 384 256 352 256
WIRE 400 256 384 256
WIRE 496 256 496 192
WIRE 496 256 464 256
WIRE 544 256 544 192
WIRE 832 256 832 240
WIRE 1152 256 1152 192
WIRE 1264 256 1264 192
WIRE -112 288 -112 240
WIRE 64 288 -112 288
WIRE 80 288 80 240
WIRE 80 288 64 288
WIRE 1424 288 1424 160
WIRE 1472 288 1424 288
WIRE 208 336 208 240
WIRE 384 336 384 256
WIRE 384 336 208 336
WIRE 1664 336 1664 240
WIRE 1424 352 1424 288
WIRE 1936 352 1936 240
WIRE 256 384 256 192
WIRE 544 384 544 320
WIRE 544 384 256 384
WIRE 624 384 624 320
WIRE 624 384 544 384
WIRE 832 384 832 336
WIRE 832 384 624 384
WIRE 864 384 832 384
WIRE 976 384 976 320
WIRE 976 384 864 384
WIRE 1152 384 1152 320
WIRE 1152 384 976 384
WIRE 1264 384 1264 336
WIRE 1264 384 1152 384
WIRE 1824 384 1824 240
WIRE 1264 512 1264 384
WIRE 1424 512 1424 416
WIRE 1424 512 1264 512
WIRE 1664 512 1664 432
WIRE 1664 512 1424 512
WIRE 1472 544 1472 288
WIRE 1824 544 1824 448
WIRE 1824 544 1472 544
WIRE 1936 544 1936 432
WIRE 1936 544 1824 544
FLAG -112 112 Vin
IOPIN -112 112 In
FLAG 64 288 0
FLAG 864 384 0
FLAG 1424 512 0
FLAG 1616 160 spwm1
FLAG 1616 416 spwm2
FLAG 656 -400 0
FLAG 800 -368 0
FLAG 448 -352 0
FLAG 368 -544 VCC
FLAG 368 -224 VEE
FLAG 1024 -496 VCC
FLAG 1024 -432 VEE
FLAG 1408 -464 spwm1
FLAG 1488 -48 0
FLAG 1552 -208 spwm2
FLAG 1200 -128 0
FLAG 1200 -208 VDD
IOPIN 1200 -208 In
FLAG 1488 -336 VDD
IOPIN 1488 -336 In
SYMBOL ind2 64 144 R0
WINDOW 3 20 1 Left 2
SYMATTR Value 100m
SYMATTR InstName L1
SYMATTR Type ind
SYMBOL ind2 224 144 M0
SYMATTR InstName L2
SYMATTR Value 1m
SYMATTR Type ind
SYMBOL voltage -112 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.001
SYMATTR InstName V1
SYMATTR Value SINE(0 180 2k)
SYMBOL diode 288 144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4007
SYMBOL diode 400 144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4007
SYMBOL diode 288 272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4007
SYMBOL diode 400 272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMATTR Value 1N4007
SYMBOL cap 528 256 R0
SYMATTR InstName C1
SYMATTR Value 10000µ
SYMBOL res 608 224 R0
SYMATTR InstName R1
SYMATTR Value 20
SYMBOL pmos 912 240 M270
SYMATTR InstName M1
SYMATTR Value IRF9640
SYMBOL voltage 832 240 R0
WINDOW 3 -175 198 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 18 0 0.1u 0.1u {(1-D)*T} {T})
SYMATTR InstName V2
SYMBOL ind 960 224 R0
SYMATTR InstName L3
SYMATTR Value 0.03m
SYMBOL cap 1136 256 R0
SYMATTR InstName C2
SYMATTR Value 220µ
SYMBOL res 1248 240 R0
SYMATTR InstName R2
SYMATTR Value 20
SYMBOL schottky 1104 176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N5819
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap 1408 96 R0
SYMATTR InstName C3
SYMATTR Value 470µ
SYMBOL cap 1408 352 R0
SYMATTR InstName C4
SYMATTR Value 470µ
SYMBOL nmos 1616 80 R0
SYMATTR InstName M2
SYMATTR Value IRF530
SYMBOL cap 1808 384 R0
SYMATTR InstName C5
SYMATTR Value 220µ
SYMBOL ind 1712 256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 5m
SYMBOL res 1920 336 R0
SYMATTR InstName R3
SYMATTR Value 20
SYMBOL voltage 800 -464 R0
WINDOW 0 -67 57 Left 2
WINDOW 3 -100 128 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(-18 18 0 10u 10u 10n 20u)
SYMBOL voltage 656 -496 R0
WINDOW 0 -69 44 Left 2
WINDOW 3 -196 81 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(0 18 200)
SYMBOL OpAmps\\OP07 1024 -528 R0
SYMATTR InstName U1
SYMBOL voltage 368 -528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 19
SYMBOL voltage 368 -368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 1
SYMBOL pmos 1440 -336 R0
SYMATTR InstName M4
SYMATTR Value BSS84
SYMBOL nmos 1440 -192 R0
SYMATTR InstName M5
SYMATTR Value Si7336ADP
SYMBOL voltage 1200 -224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 18
SYMBOL nmos 1616 336 R0
SYMATTR InstName M3
SYMATTR Value IRF530
TEXT -40 96 Left 2 !K L1 L2 1
TEXT -144 296 Left 2 !.tran 100ms
TEXT 656 472 Left 2 !.param T 20u
TEXT 656 504 Left 2 !.param D 0.5
